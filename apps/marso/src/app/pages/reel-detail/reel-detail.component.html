<section class="reel-detail" *ngIf="reel as project; else loading" [style.--reel-accent]="project.accent">
  <div class="reel-detail__layout">
    <div class="reel-detail__media">
      <div class="reel-detail__filmstrip" aria-hidden="true">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>

      <figure class="reel-detail__figure">
        <div class="reel-detail__video-shell">
          <video
            #detailVideo
            class="reel-detail__video"
            controls
            preload="metadata"
            playsinline
            autoplay
            muted
            poster="https://m4riin.github.io/marso/og-cover.jpg"
            [attr.title]="project.title + ' — ' + project.client"
            [attr.aria-label]="project.title + ' — ' + project.client"
            aria-describedby="detail-video-caption"
          >
            <source [src]="'assets/media/' + project.videoSrc" type="video/mp4" />
            Votre navigateur ne supporte pas encore la vidéo HTML5.
          </video>
        </div>
        <figcaption id="detail-video-caption" class="reel-detail__caption">
          {{ project.title }} — {{ project.client }} · {{ project.format }}
        </figcaption>
      </figure>
    </div>

    <div class="reel-detail__body">
      <header class="reel-detail__header">
        <p class="reel-detail__eyebrow">
          {{ project.format }} · {{ project.location }} · {{ project.year }}
        </p>
        <h1>{{ project.title }}</h1>
        <p class="reel-detail__client">{{ project.client }}</p>
        <p class="reel-detail__summary">{{ project.summary }}</p>

        <div class="reel-detail__tags">
          <span *ngFor="let tag of project.tags">{{ tag }}</span>
        </div>
      </header>

      <div class="reel-detail__grid">
        <article>
          <h2>Contexte</h2>
          <p>{{ project.context }}</p>
        </article>
        <article>
          <h2>Contributions</h2>
          <ul>
            <li *ngFor="let contribution of project.contributions">{{ contribution }}</li>
          </ul>
        </article>
      </div>

      <a class="reel-detail__back" routerLink="/">← Retour aux projets</a>
    </div>
  </div>
  <script type="application/ld+json" *ngIf="videoSchema">
    {{ videoSchema }}
  </script>
</section>

<ng-template #loading>
  <div class="reel-detail__loading">
    Chargement du projet…
  </div>
</ng-template>
