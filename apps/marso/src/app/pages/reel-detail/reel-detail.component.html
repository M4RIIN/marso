<section class="reel-detail" *ngIf="project as detail; else loading" [style.--reel-accent]="detail.accent">
  <div class="reel-detail__layout">
    <div class="reel-detail__media" [attr.data-aspect]="detail.aspectRatio">
      <div class="reel-detail__filmstrip" aria-hidden="true">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>

      <figure class="reel-detail__figure">
        <div class="reel-detail__video-shell">
          <video
            #detailVideo
            class="reel-detail__video"
            controls
            preload="metadata"
            playsinline
            autoplay
            muted
            poster="https://www.equipe4.fr/og-cover.png"
            [attr.title]="detail.title + ' — ' + detail.client"
            [attr.aria-label]="detail.title + ' — ' + detail.client"
            aria-describedby="detail-video-caption"
          >
            <source [src]="detail.videoUrl" type="video/mp4" />
            Votre navigateur ne supporte pas encore la vidéo HTML5.
          </video>
        </div>
        <figcaption id="detail-video-caption" class="reel-detail__caption">
          {{ detail.title }} — {{ detail.client }} · {{ detail.type }}
        </figcaption>
      </figure>
    </div>

    <div class="reel-detail__body">
      <header class="reel-detail__header">
        <p class="reel-detail__eyebrow">
          {{ detail.type }} · {{ detail.location }} · {{ detail.year }}
        </p>
        <h1>{{ detail.title }}</h1>
        <p class="reel-detail__client">{{ detail.client }}</p>
        <p class="reel-detail__summary">{{ detail.summary }}</p>

        <div class="reel-detail__tags">
          <span *ngFor="let tag of detail.tags">{{ tag }}</span>
        </div>
      </header>

      <div class="reel-detail__grid">
        <article>
          <h2>Contexte</h2>
          <p>{{ detail.context }}</p>
        </article>
        <article>
          <h2>Contributions</h2>
          <ul>
            <li *ngFor="let contribution of detail.contributions">{{ contribution }}</li>
          </ul>
        </article>
      </div>

      <a class="reel-detail__back" routerLink="/">← Retour aux projets</a>
    </div>
  </div>
</section>

<ng-template #loading>
  <div class="reel-detail__loading">
    Chargement du projet…
  </div>
</ng-template>
